/*******************************************************************************
	GLUE-Math test routine: rcm2()

*******************************************************************************/
#include "../arch/arch.h"
#include <stdio.h>
#include <stdlib.h>
#include <float.h>
#include <math.h>
/*******************************************************************************
Compile on MinGW 64bit:
$ gcc -Wall -Wextra -O3 -o bin/rcm2 test/rcm2.c arch/rcm2.c arch/rcm2l.c arch/rcm2f.c

And Test Result:
RCM test
x, rcm2(), frexp()
  0.2  -3  1.600000000000000  -2  0.800000000000000
  0.4  -2  1.600000000000000  -1  0.800000000000000
  0.6  -1  1.200000000000000   0  0.600000000000000
  0.8  -1  1.600000000000000   0  0.800000000000000
  1.0   0  1.000000000000000   1  0.500000000000000
  1.2   0  1.200000000000000   1  0.600000000000000
  1.4   0  1.400000000000000   1  0.700000000000000
  1.6   0  1.600000000000000   1  0.800000000000000
  1.8   0  1.800000000000000   1  0.900000000000000
  2.0   1  1.000000000000000   2  0.500000000000000
  2.2   1  1.100000000000000   2  0.550000000000000
  2.4   1  1.200000000000000   2  0.600000000000000
  2.6   1  1.300000000000000   2  0.650000000000000
  2.8   1  1.400000000000000   2  0.700000000000000
  3.0   1  1.500000000000000   2  0.750000000000000
  3.2   1  1.600000000000000   2  0.800000000000000
  3.4   1  1.700000000000000   2  0.850000000000000
  3.6   1  1.800000000000000   2  0.900000000000000
  3.8   1  1.900000000000000   2  0.950000000000000
  4.0   2  1.000000000000000   3  0.500000000000000
x, rcm2l(), frexpl()
  0.2  -3  1.600000000000000000  -2  0.800000000000000000
  0.4  -2  1.600000000000000000  -1  0.800000000000000000
  0.6  -1  1.200000000000000000   0  0.600000000000000000
  0.8  -1  1.600000000000000000   0  0.800000000000000000
  1.0   0  1.000000000000000000   1  0.500000000000000000
  1.2   0  1.200000000000000000   1  0.600000000000000000
  1.4   0  1.400000000000000000   1  0.700000000000000000
  1.6   0  1.600000000000000000   1  0.800000000000000000
  1.8   0  1.800000000000000000   1  0.900000000000000000
  2.0   1  1.000000000000000000   2  0.500000000000000000
  2.2   1  1.100000000000000000   2  0.550000000000000000
  2.4   1  1.200000000000000000   2  0.600000000000000000
  2.6   1  1.300000000000000000   2  0.650000000000000000
  2.8   1  1.400000000000000000   2  0.700000000000000000
  3.0   1  1.500000000000000000   2  0.750000000000000000
  3.2   1  1.600000000000000000   2  0.800000000000000000
  3.4   1  1.700000000000000000   2  0.850000000000000000
  3.6   1  1.800000000000000000   2  0.900000000000000000
  3.8   1  1.900000000000000000   2  0.950000000000000000
  4.0   2  1.000000000000000000   3  0.500000000000000000
x, rcm2f(), frexpf()
  0.2  -3  1.600000  -2  0.800000
  0.4  -2  1.600000  -1  0.800000
  0.6  -1  1.200000   0  0.600000
  0.8  -1  1.600000   0  0.800000
  1.0   0  1.000000   1  0.500000
  1.2   0  1.200000   1  0.600000
  1.4   0  1.400000   1  0.700000
  1.6   0  1.600000   1  0.800000
  1.8   0  1.800000   1  0.900000
  2.0   1  1.000000   2  0.500000
  2.2   1  1.100000   2  0.550000
  2.4   1  1.200000   2  0.600000
  2.6   1  1.300000   2  0.650000
  2.8   1  1.400000   2  0.700000
  3.0   1  1.500000   2  0.750000
  3.2   1  1.600000   2  0.800000
  3.4   1  1.700000   2  0.850000
  3.6   1  1.800000   2  0.900000
  3.8   1  1.900000   2  0.950000
  4.0   2  1.000000   3  0.500000
*******************************************************************************/

int
main(void)
{
	int exp;
	puts("RCM test");
	puts("x, rcm2(), frexp()");
	for (int i = 1; i <= 20; i++) {
		const double x = i / 5.0;  // Iterator Constant
		const double fra = rcm2(x, &exp);
		printf("%5.1f %3d %*.*f ", x, exp,
		       DBL_DIG + 3, DBL_DIG, fra);
		const double fra2 = frexp(x, &exp);
		printf("%3d %*.*f\n", exp, DBL_DIG + 3, DBL_DIG, fra2);
	}
	puts("x, rcm2l(), frexpl()");
	for (int i = 1; i <= 20; i++) {
		const long double x = i / 5.0L;  // Iterator Constant
		const long double fra = rcm2l(x, &exp);
		printf("%5.1Lf %3d %*.*Lf ", x, exp,
		       LDBL_DIG + 3, LDBL_DIG, fra);
		const long double fra2 = frexpl(x, &exp);
		printf("%3d %*.*Lf\n", exp, LDBL_DIG + 3, LDBL_DIG, fra2);
	}
	puts("x, rcm2f(), frexpf()");
	for (int i = 1; i <= 20; i++) {
		const float x = i / 5.0;  // Iterator Constant
		float fra = rcm2f(x, &exp);
		printf("%5.1f %3d %*.*f ", x, exp,
		       FLT_DIG + 3, FLT_DIG, fra);
		const float fra2 = frexpf(x, &exp);
		printf("%3d %*.*f\n", exp, FLT_DIG + 3, FLT_DIG, fra2);
	}
	return 0;
}
